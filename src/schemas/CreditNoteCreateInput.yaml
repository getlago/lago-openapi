type: object
required:
  - credit_note
properties:
  credit_note:
    type: object
    required:
      - invoice_id
      - items
    properties:
      invoice_id:
        type: string
        format: "uuid"
        description: The invoice unique identifier, created by Lago.
        example: "1a901a90-1a90-1a90-1a90-1a901a901a90"
      reason:
        type:
          - string
          - "null"
        enum:
          - duplicated_charge
          - product_unsatisfactory
          - order_change
          - order_cancellation
          - fraudulent_charge
          - other
          - null
        description: |-
          The reason of the credit note creation.
          Possible values are `duplicated_charge`, `product_unsatisfactory`, `order_change`, `order_cancellation`, `fraudulent_charge` or `other`.
        example: duplicated_charge
      description:
        type: string
        description: The description of the credit note.
        example: "description"
      credit_amount_cents:
        type:
          - integer
          - "null"
        description: The total amount to be credited to the customer balance for discounts on future invoices. For a total or partial refund or credit, the amount in cents must include both the item amount and the applicable tax. The refunded and credited amounts should always balance. The total, including taxes, cannot exceed the invoice’s total fees.”
        example: 100
      refund_amount_cents:
        type:
          - integer
          - "null"
        description: The total amount to be refunded immediately to the payment method used by the customer. For a total or partial refund or credit, the amount in cents must include both the item amount and the applicable tax. The refunded and credited amounts should always balance. The total, including taxes, cannot exceed the invoice’s total fees.”
        example: 500
      items:
        type: array
        items:
          type: object
          required:
            - fee_id
            - amount_cents
          properties:
            fee_id:
              type: string
              format: "uuid"
              description: The fee unique identifier, created by Lago.
              example: "1a901a90-1a90-1a90-1a90-1a901a901a90"
            amount_cents:
              type: integer
              description: This is the amount of the credit note item excluding taxes, expressed in cents.
              example: 100
        description: The list of credit note's items.
        example:
          - fee_id: "1a901a90-1a90-1a90-1a90-1a901a901a90"
            amount_cents: 100
          - fee_id: "1a901a90-1a90-1a90-1a90-1a901a901a91"
            amount_cents: 500
      metadata:
        $ref: "./CreditNoteMetadataInput.yaml"
