parameters:
  - name: external_id
    in: path
    description: External ID of the existing subscription
    required: true
    schema:
      type: string
      example: '5eb02857-a71e-4ea2-bcf9-57d3a41bc6ba'
get:
  tags:
    - entitlements
  summary: List all subscription entitlements
  description: This endpoint retrieves all entitlements for a specific subscription, including both plan entitlements and any subscription-specific overrides.
  operationId: findAllSubscriptionEntitlements
  responses:
    '200':
      description: List of subscription entitlements
      content:
        application/json:
          schema:
            $ref: '../schemas/Entitlement/SubscriptionEntitlements.yaml'
    '401':
      $ref: '../responses/Unauthorized.yaml'
    '404':
      $ref: '../responses/NotFound.yaml'
patch:
  tags:
    - entitlements
  summary: Update subscription entitlements
  description: This accepts a list of entitlements to update. If the feature isn't part of the subscription yet, it's added with all the privileges from the payload. If the feature is already part of the subscription (via plan or via override), the privilege and values are updated or added. All privileges must be valid for the feature. All features  and privileges not part of the payload are left untouched. To remove privileges or features, use the DELETE endpoints.
  operationId: updateSubscriptionEntitlements
  requestBody:
    description: Subscription entitlements payload
    content:
      application/json:
        schema:
          $ref: '../schemas/Entitlement/EntitlementUpdateInput.yaml'
    required: true
  responses:
    '200':
      description: Subscription entitlements updated
      content:
        application/json:
          schema:
            $ref: '../schemas/Entitlement/SubscriptionEntitlements.yaml'
    '400':
      $ref: '../responses/BadRequest.yaml'
    '401':
      $ref: '../responses/Unauthorized.yaml'
    '404':
      $ref: '../responses/NotFound.yaml'
    '422':
      $ref: '../responses/UnprocessableEntity.yaml'
